<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Interest Hub & Collection Tracker</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        body { background: linear-gradient(135deg, #667eea, #764ba2); min-height: 100vh; padding: 20px; display: flex; justify-content: center; align-items: center; }
        .container { background: white; padding: 30px; border-radius: 20px; box-shadow: 0 20px 50px rgba(0,0,0,0.3); width: 100%; max-width: 800px; text-align: center; }
        .buttons { display: flex; flex-direction: column; gap: 15px; margin: 20px 0; }
        .btn { text-decoration: none; padding: 15px; border-radius: 10px; font-weight: 600; color: white; border: none; cursor: pointer; display: block; }
        .simple { background: #667eea; }
        .compound { background: #2980B9; }
        .history-btn { background: #27ae60; margin-top: 10px; }
        
        .history-section { margin-top: 30px; display: none; text-align: left; }
        table { width: 100%; border-collapse: collapse; margin-top: 15px; font-size: 13px; }
        th, td { border: 1px solid #ddd; padding: 10px; text-align: center; }
        th { background: #f4f7f6; color: #333; }
        .total-row { font-weight: bold; background: #e8f5e9; }
        .clear-btn { background: #e74c3c; padding: 8px 15px; font-size: 12px; margin-top: 15px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Interest Calculator Hub</h1>
        <div class="buttons">
            <a href="Final SIC.html" class="btn simple">Simple Interest Calculator</a>
            <a href="Compound.html" class="btn compound">Compound Interest Calculator</a>
            <button class="btn history-btn" onclick="toggleHistory()">ðŸ“‹ View Payment History</button>
        </div>

        <div id="historySection" class="history-section">
            <h3>ðŸ’° Collection Summary</h3>
            <table>
                <thead>
                    <tr>
                        <th>Period</th>
                        <th>Principal</th>
                        <th>Interest</th>
                        <th>Total Amount</th>
                    </tr>
                </thead>
                <tbody id="collectionTableBody">
                    </tbody>
            </table>
            <button class="btn clear-btn" onclick="clearGlobalHistory()">Reset All History</button>
        </div>
    </div>

    <script>
        function toggleHistory() {
            const sec = document.getElementById('historySection');
            sec.style.display = sec.style.display === 'block' ? 'none' : 'block';
            if(sec.style.display === 'block') loadHistory();
        }

        function loadHistory() {
            const history = JSON.parse(localStorage.getItem('payment_history') || '[]');
            const now = new Date();
            
            const stats = {
                daily: { p: 0, i: 0, t: 0 },
                monthly: { p: 0, i: 0, t: 0 },
                annual: { p: 0, i: 0, t: 0 }
            };

            history.forEach(item => {
                const d = new Date(item.date);
                const isToday = d.toDateString() === now.toDateString();
                const isThisMonth = d.getMonth() === now.getMonth() && d.getFullYear() === now.getFullYear();
                const isThisYear = d.getFullYear() === now.getFullYear();

                if (isToday) { stats.daily.p += item.p; stats.daily.i += item.i; stats.daily.t += (item.p + item.i); }
                if (isThisMonth) { stats.monthly.p += item.p; stats.monthly.i += item.i; stats.monthly.t += (item.p + item.i); }
                if (isThisYear) { stats.annual.p += item.p; stats.annual.i += item.i; stats.annual.t += (item.p + item.i); }
            });

            const rows = [
                { label: 'Daily (Today)', data: stats.daily },
                { label: 'Monthly', data: stats.monthly },
                { label: 'Annually', data: stats.annual }
            ];

            document.getElementById('collectionTableBody').innerHTML = rows.map(row => `
                <tr>
                    <td><strong>${row.label}</strong></td>
                    <td>â‚¹${row.data.p.toFixed(2)}</td>
                    <td>â‚¹${row.data.i.toFixed(2)}</td>
                    <td class="total-row">â‚¹${row.data.t.toFixed(2)}</td>
                </tr>
            `).join('');
        }

        function clearGlobalHistory() {
            if(confirm("Permanently delete all payment records?")) {
                localStorage.removeItem('payment_history');
                loadHistory();
            }
        }
    </script>
</body>
</html>
